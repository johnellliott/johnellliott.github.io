<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Matches city weather with other global cities using statistical climate matching algorithm, with results displayed in an interactive Google Map">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">
	<!-- Stop pinch zoom -->
	<!--<meta name="viewport" content="user-scalable=no"/>-->
	<meta name="HandheldFriendly" content="true" />
    <title>similar.city - Match the Climates of Cities and Towns around the World</title>

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <!--<link rel="icon" sizes="192x192" href="images/touch/chrome-touch-icon-192x192.png">-->

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="similar.city">
    <link rel="apple-touch-icon-precomposed" href="apple-touch-icon-precomposed.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#3372DF">

    <!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
    <!--
    <link rel="canonical" href="http://www.example.com/">
    -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script src="https://apis.google.com/js/client.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="material.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
    #view-source {
      position: fixed;
      display: block;
      right: 0;
      bottom: 0;
      margin-right: 40px;
      margin-bottom: 40px;
      z-index: 900;
    }
    </style>
    <!--<script src="https://maps.googleapis.com/maps/api/js"></script>-->
	<script type="text/javascript"
		src="https://maps.googleapis.com/maps/api/js?libraries=visualization&sensor=true_or_false">
	</script>
	<script src="matchingweather.js"></script>

	<script>

	$( document ).ready(function() {
		$("#siteInfo").hide();
		//$("#welcomeCard").hide(); // remove this when ready to go-live
		$("#aboutButton").prop("disabled",true); // uncomment this
		$("#welcomeClose").click(function() {
			$("#welcomeCard").fadeOut();
			$("#aboutButton").prop("disabled",false);
		});
		$("#aboutClose").click(function() {
			$("#siteInfo").fadeOut();
			$("#aboutButton").prop("disabled",false);
		});		
		$("#aboutButton").click(function() {
			$("#welcomeCard").hide();
			$("#siteInfo").fadeIn();
			$("#aboutButton").prop("disabled",true);
			if (getParameterByName("debug") != "true") {
				//ga('send', 'event', 'category', 'action', 'label');
				ga('send', 'event', 'Site', 'About');
			}			
			
		});
		
		$("#btnSelectCity").click(function() {
			$("#siteInfo").fadeIn();
			$("#aboutButton").prop("disabled",true);
		});

		$(".cityShortcut").click(function() {
			$("#welcomeCard").hide();
			var cityInfo = citiesByRef[this.id];
			
			if (getParameterByName("debug") != "true") {
				ga('send', 'event', 'City', this.id, 'Select from shortcut menu');
			}
			
			openCity(cityInfo);
		});
	});
    </script>	

  </head>
  <body>
    <div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
      <header class="demo-header mdl-layout__header mdl-color--white mdl-color--grey-100 mdl-color-text--grey-600" id="customHeader">
        <div class="mdl-layout__header-row">
          <span class="mdl-layout-title desktop">similar.city</span>
		  <span class="mdl-layout-title smartphone">MWC</span>
          <div class="mdl-layout-spacer"></div>
		  <span class="mdl-layout-title" id="selectedCityName">None</span> 
		  <div>&nbsp;&nbsp;&nbsp;</div>
          <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="cityMatchInfo">
            <i class="material-icons">info_outline</i>
          </button>
		  <div>&nbsp;&nbsp;</div>
          <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="hdrbtn">
            <i class="material-icons">place</i>
          </button>		  
          <ul class="mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--bottom-right" for="hdrbtn" id="menu">
			<li class="mdl-menu__item cityShortcut" id="Abu_Dhabi">Abu Dhabi</li>
			<li class="mdl-menu__item cityShortcut" id="Chicago">Chicago</li>
			<li class="mdl-menu__item cityShortcut" id="Hong_Kong">Hong Kong</li>
			<li class="mdl-menu__item cityShortcut" id="London">London</li>
			<li class="mdl-menu__item cityShortcut" id="Los_Angeles">Los Angeles</li>
			<li class="mdl-menu__item cityShortcut" id="Buenos_Aires">Buenos Aires</li>
			<li class="mdl-menu__item cityShortcut" id="Singapore">Singapore</li>
			<li class="mdl-menu__item cityShortcut" id="Tokyo">Tokyo</li>
          </ul>
        </div>
      </header>
	  

      <main class="mdl-layout__content mdl-color--grey-100" id="customMain">
		<div id="map-canvas"></div>
      </main>
    </div>
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" style="position: fixed; left: -1000px; height: -1000px;">
        <defs>
          <mask id="piemask" maskContentUnits="objectBoundingBox">
            <circle cx=0.5 cy=0.5 r=0.49 fill="white" />
            <circle cx=0.5 cy=0.5 r=0.40 fill="black" />
          </mask>
          <g id="piechart">
            <circle cx=0.5 cy=0.5 r=0.5 />
            <path d="M 0.5 0.5 0.5 0 A 0.5 0.5 0 0 1 0.95 0.28 z" stroke="none" fill="rgba(255, 255, 255, 0.75)" />
          </g>
        </defs>
      </svg>
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 250" style="position: fixed; left: -1000px; height: -1000px;">
        <defs>
          <g id="chart">
            <g id="Gridlines">
              <line fill="#888888" stroke="#888888" stroke-miterlimit="10" x1="0" y1="27.3" x2="468.3" y2="27.3"/>
              <line fill="#888888" stroke="#888888" stroke-miterlimit="10" x1="0" y1="66.7" x2="468.3" y2="66.7"/>
              <line fill="#888888" stroke="#888888" stroke-miterlimit="10" x1="0" y1="105.3" x2="468.3" y2="105.3"/>
              <line fill="#888888" stroke="#888888" stroke-miterlimit="10" x1="0" y1="144.7" x2="468.3" y2="144.7"/>
              <line fill="#888888" stroke="#888888" stroke-miterlimit="10" x1="0" y1="184.3" x2="468.3" y2="184.3"/>
            </g>
            <g id="Numbers">
              <text transform="matrix(1 0 0 1 485 29.3333)" fill="#888888" font-family="'Roboto'" font-size="9">500</text>
              <text transform="matrix(1 0 0 1 485 69)" fill="#888888" font-family="'Roboto'" font-size="9">400</text>
              <text transform="matrix(1 0 0 1 485 109.3333)" fill="#888888" font-family="'Roboto'" font-size="9">300</text>
              <text transform="matrix(1 0 0 1 485 149)" fill="#888888" font-family="'Roboto'" font-size="9">200</text>
              <text transform="matrix(1 0 0 1 485 188.3333)" fill="#888888" font-family="'Roboto'" font-size="9">100</text>
              <text transform="matrix(1 0 0 1 0 249.0003)" fill="#888888" font-family="'Roboto'" font-size="9">1</text>
              <text transform="matrix(1 0 0 1 78 249.0003)" fill="#888888" font-family="'Roboto'" font-size="9">2</text>
              <text transform="matrix(1 0 0 1 154.6667 249.0003)" fill="#888888" font-family="'Roboto'" font-size="9">3</text>
              <text transform="matrix(1 0 0 1 232.1667 249.0003)" fill="#888888" font-family="'Roboto'" font-size="9">4</text>
              <text transform="matrix(1 0 0 1 309 249.0003)" fill="#888888" font-family="'Roboto'" font-size="9">5</text>
              <text transform="matrix(1 0 0 1 386.6667 249.0003)" fill="#888888" font-family="'Roboto'" font-size="9">6</text>
              <text transform="matrix(1 0 0 1 464.3333 249.0003)" fill="#888888" font-family="'Roboto'" font-size="9">7</text>
            </g>
            <g id="Layer_5">
              <polygon opacity="0.36" stroke-miterlimit="10" points="0,223.3 48,138.5 154.7,169 211,88.5
              294.5,80.5 380,165.2 437,75.5 469.5,223.3 	"/>
            </g>
            <g id="Layer_4">
              <polygon stroke-miterlimit="10" points="469.3,222.7 1,222.7 48.7,166.7 155.7,188.3 212,132.7
              296.7,128 380.7,184.3 436.7,125 	"/>
            </g>
          </g>
        </defs>
      </svg> 
	  <div id="legend">
		  <img src="images/legend.png" />
	  </div>
	  <button id="aboutButton" class="mdl-button mdl-js-button mdl-button--fab">
		  <i class="material-icons">help_outline</i>
	  </button>
	 
		<div class="mdl-card mdl-shadow--2dp demo-card-wide" id="welcomeCard">
		  <div class="mdl-card__title">
			<h2 class="mdl-card__title-text">Welcome</h2>
		  </div>
		  <div class="mdl-card__supporting-text">
			Welcome to <b>similar.city</b>. Pick a city to find other cities with similar weather. As a starting point, Barcelona is already selected, but you can choose any city you want.
		  </div>
		  <div class="mdl-card__actions mdl-card--border">
			<a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" id="welcomeClose">
			  Let's Go
			</a>
		  </div>
		  <div class="mdl-card__menu">
			<!--<button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect">
			  <i class="material-icons">share</i>
			</button>-->
		  </div>
		</div>	  
		
		<div class="mdl-card mdl-shadow--2dp demo-card-wide" id="siteInfo">
		  <div class="mdl-card__supporting-text">
			<code>
			/**<br/>
			 *<br/>
			 * <b>similar.city</b><br/>
			 *<br/>	
			 * Weather data grabbed using the Java<br/> 
			 * library <a href="http://jsoup.org/" target="_blank">jsoup</a>. Predictive modelling<br/>
			 * of location weather similarity done<br/>
			 * using <a href="https://www.r-project.org/about.html">R</a>. Web app written in HTML,<br/>
			 * jQuery and using Google API. Site<br/>
			 * hosted on <a href="https://github.com/">Github</a>.<br/>
			 *<br/>
			 *<br/>	
			 * Weather is matched on temperature,<br/> 
			 * rainfall, humidity, and climate<br/>
			 * classification. Variables are<br/>
			 * matched based on mean, variance,<br/>
			 * maxima and minima and seasonality<br/>
			 * via multivariate modelling.<br/>		
			 * <br/>
			 * By <a href="https://au.linkedin.com/in/johnrobertelliott" target="_blank">John Elliott</a><br/>
			 *<br/>			 
			 */<br/>
			</code>
		  </div>
		  <div class="mdl-card__actions mdl-card--border">
			<a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" id="aboutClose">
			  Close
			</a>
		  </div>
		  <div class="mdl-card__menu">
			<!--<button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect">
			  <i class="material-icons">share</i>
			</button>-->
		  </div>
		</div>	  		

		<div class="mdl-card mdl-shadow--2dp demo-card-wide" id="matchInfo">
		  <div class="mdl-card__supporting-text">
			<h4 id="cityName"></h4>
			<p>Top 3 matches by region</p>
			<table class="mdl-data-table mdl-shadow--2dp" id="matchInfoTable">
			  <tbody>
				<tr class="matchInfoAfrica header">
				  <td class="mdl-data-table__cell--non-numeric">
					Africa & Middle East
				  </td>
				</tr>			  
				<tr class="matchInfoAfrica data">
				  <td class="mdl-data-table__cell--non-numeric">
					<table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp" id="africaMatches">
					  <thead>
						<tr>
						  <th class="mdl-data-table__cell--non-numeric">City</th>
						  <th>Score</th>
						</tr>
					  </thead>
					  <tbody>
						<tr id="africaRow1" class="cityRow"></tr>
						<tr id="africaRow2" class="cityRow"></tr>
						<tr id="africaRow3" class="cityRow"></tr>
					  </tbody>
					</table>
				  </td>
				</tr>
				
				<tr class="matchInfoAsia header">
				  <td class="mdl-data-table__cell--non-numeric">
					Asia-Pacific
				  </td>
				</tr>			  
				<tr class="matchInfoAsia data">
				  <td class="mdl-data-table__cell--non-numeric">
					<table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp" id="asiaMatches">
					  <thead>
						<tr>
						  <th class="mdl-data-table__cell--non-numeric">City</th>
						  <th>Score</th>
						</tr>
					  </thead>
					  <tbody>
						<tr id="asiaRow1" class="cityRow"></tr>
						<tr id="asiaRow2" class="cityRow"></tr>
						<tr id="asiaRow3" class="cityRow"></tr>
					  </tbody>
					</table>
				  </td>
				</tr>
				
				

				<tr class="matchInfoEurope header">
				  <td class="mdl-data-table__cell--non-numeric">
					Europe
				  </td>
				</tr>			  
				<tr class="matchInfoEurope data">
				  <td class="mdl-data-table__cell--non-numeric">
					<table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp" id="europeMatches">
					  <thead>
						<tr>
						  <th class="mdl-data-table__cell--non-numeric">City</th>
						  <th>Score</th>
						</tr>
					  </thead>
					  <tbody>
						<tr id="europeRow1" class="cityRow"></tr>
						<tr id="europeRow2" class="cityRow"></tr>
						<tr id="europeRow3" class="cityRow"></tr>
					  </tbody>
					</table>				    
				  </td>
				</tr>				
				
				<tr class="matchInfoNA header">
				  <td class="mdl-data-table__cell--non-numeric">
					North America
				  </td>
				</tr>			  
				<tr class="matchInfoNA data">
				  <td class="mdl-data-table__cell--non-numeric">
					<table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp" id="naMatches">
					  <thead>
						<tr>
						  <th class="mdl-data-table__cell--non-numeric">City</th>
						  <th>Score</th>
						</tr>
					  </thead>
					  <tbody>
						<tr id="naRow1" class="cityRow"></tr>
						<tr id="naRow2" class="cityRow"></tr>
						<tr id="naRow3" class="cityRow"></tr>
					  </tbody>
					</table>				    
				  </td>
				</tr>		

				<tr class="matchInfoSA header">
				  <td class="mdl-data-table__cell--non-numeric">
					South America
				  </td>
				</tr>			  
				<tr class="matchInfoSA data">
				  <td class="mdl-data-table__cell--non-numeric">
					<table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp" id="saMatches">
					  <thead>
						<tr>
						  <th class="mdl-data-table__cell--non-numeric">City</th>
						  <th>Score</th>
						</tr>
					  </thead>
					  <tbody>
						<tr id="saRow1" class="cityRow"></tr>
						<tr id="saRow2" class="cityRow"></tr>
						<tr id="saRow3" class="cityRow"></tr>
					  </tbody>
					</table>				    
				  </td>
				</tr>						
			  </tbody>
			</table>		  
		  <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="matchInfoClose">
            <i class="material-icons">close</i>
          </button>				  
		  </div>
		</div>	  		

	  <script src="material.min.js"></script>

  </body>  

<script>

	if (getParameterByName("debug") != "true") {

	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-65946158-1', 'auto');
	  ga('send', 'pageview');
	  
  }
 

</script>

</html>
